---
title: "CRTspat package"
author: "Tom Smith, Lea Multerer"
date: "`r Sys.Date()`"
output:
  rmarkdown::html_vignette:
  toc: true
vignette: >
  %\VignetteIndexEntry{CRTspat package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

<!--To build the vignette
# since the vignette takes a long time to run, it is not run with every build
# as suggested here https://ropensci.org/blog/2019/12/08/precompute-vignettes/
# to Knit this vignette without this time consuming step being part of the default build
knitr::knit("vignettes/CRTspat.Rmd.orig", output = "vignettes/CRTspat.Rmd")
rmarkdown.html_vignette.check_title = FALSE
devtools::install(build_vignettes = TRUE)
-->
## Summary

The `CRTspat` package is intended to support the design and analysis of cluster-randomized trials (CRTs) where there is geographical contamination between the arms. It can also be used in simulation of such CRTs to support development of improved methodology. An important set of applications is in field trials of vector-control interventions against malaria.

The package can facilitate design of efficient trials by providing algorithms for:
+ algorithmic assignment of clusters (and buffer zones)
+ analysis of the effects of spill-over
+ simulation of trials based on the geography of previously studied field sites and trials, and observed spatial patterns of outcomes, or on geographical information from novel sites.

The function `CRTanalysis` is a wrapper for the statistical analysis packages:

+ [geepack](https://www.jstatsoft.org/article/view/v015i02)
+ [INLA](https://www.r-inla.org/)
+ [jagsUI](https://cran.r-project.org/web/packages/jagsUI/index.html)
+ and the [t.test](https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/t.test) function in the `stats` package

The methods are described in the papers [Multerer *et al.* (2021a)](https://trialsjournal.biomedcentral.com/articles/10.1186/s13063-021-05543-8) and [Multerer *et al.* (2021b)](https://malariajournal.biomedcentral.com/articles/10.1186/s12936-021-03924-7).

##  Anticipated use cases

+ Algorithmic definition of clusters and of buffer zones (if required)
+ Simulation of trials (for evaluating power and testing methods)
+ Analysis of trials allowing for spillover effects
+ Determination of optimal cluster size
+ Determining the effects of different sizes of buffer zones
+ Estimation of intracluster correlations (ICC), contamination ranges and efficacy
+ Power and sample size calculations allowing for contamination
+ Anonymising input locations (if required for sharing reference datasets).

Examples of the workflow for each use case are as follows:

[1. Algorithmic definition of clusters and of buffer zones](Usecase1.html)

[2. Simulation of trials with geographical contamination](Usecase2.html)

[3. Estimation of intracluster correlations (ICC) by cluster size](Usecase3.html)

[4. Estimation of optimal cluster size for a trial with pre-determined buffer width](Usecase4.html)

[5. Analysis of trials (including methods for analysing contamination)](Usecase5.html)

+ Determining the effects of different sizes of buffer zones

+ Power and sample size calculations allowing for contamination

[Anonymising input locations (if required for sharing reference datasets)](../reference/anonymize.site.html)


specify or compute cluster boundaries

 Random assignment of clusters to arms

## Package functions

The package functions are listed in the [manual](../reference/index.html)

