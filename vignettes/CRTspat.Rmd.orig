---
title: "CRTspat package"
author: "Tom Smith, Lea Multerer"
date: "`r Sys.Date()`"
output:
  rmarkdown::html_vignette:
  toc: true
vignette: >
  %\VignetteIndexEntry{CRTspat package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Summary

The `CRTspat` package is intended to support the design and analysis of cluster-randomized trials (CRTs) where there is geographical contamination between the arms. It can also be used in simulation of such CRTs to support development of improved methodology. An important set of applications is in field trials of vector-control interventions against malaria.

The package can facilitate design of efficient trials by providing algorithms for:

+ algorithmic assignment of clusters (and buffer zones), and analysis of the implications of different choices.
+ analysis of the effects of contamination between arms
+ simulation of trials based on the geography of previously studied field sites and trials, and observed spatial patterns of outcomes, or on geographical information from novel sites.

The package builds on the work of [Multerer *et al.* (2021a)](https://trialsjournal.biomedcentral.com/articles/10.1186/s13063-021-05543-8), [Multerer *et al.* (2021b)](https://malariajournal.biomedcentral.com/articles/10.1186/s12936-021-03924-7) and
 [Anaya-Izquierdo & Alexander(2021)](https://onlinelibrary.wiley.com/doi/full/10.1111/biom.13316).

The package is intended to function with outcomes that are proportions, count data, or continuous variables.
The current version (0.1.0.9000) is for **testing** and has been developed mainly on data that are proportions. It will be revised to ensure that it gives the correct outputs with other kinds of outcome.

##  Anticipated use cases

Examples are provided of the workflow for different use cases, as follows:

[1. Algorithmic definition of clusters](Usecase1.html)

[2. Simulation of trials with geographical contamination](Usecase2.html)

[3. Estimation of intracluster correlations (ICC) by cluster size](Usecase3.html)

[4. Estimation of optimal cluster size for a trial with pre-determined buffer width](Usecase4.html)

[5. Analysis of trials (including methods for analysing contamination)](Usecase5.html)

[6. Thematic mapping of the geography of a CRT](Usecase6.html)

[7. Power and sample size calculations allowing for contamination](Usecase7.html)

[8, Eggs-to fry or scramble? Implications of excluding buffer zones from the measurement of outcomes](Usecase8.html)

[9: Preparation of datasets for `CRTspat`](Usecase9.html)

[10: Anonymising input locations (if required for sharing reference datasets)](../reference/anonymize_site.html)

## Package functions

The package functions are listed in the [manual](../reference/index.html).

## Downloading and installing

`CRTspat` is on [github](https://github.com/ThomasASmith/CRTspat/) and can be installed using:

```{r, eval=F, echo=T}
install.packages("devtools")
library(devtools)
install_github("thomasasmith/CRTspat")
```

You may need to install other packages on which `CRTspat` depends. In particular, some of the functionality depends on [R-INLA](https://www.r-inla.org/) and [jagsUI](https://CRAN.R-project.org/package=jagsUI)
however much of `CRTspat` will run without these packages.
